FROM armdocker.rnd.ericsson.se/proj-ldc/common_base_os/sles:3.60.0-32

RUN zypper addrepo -C -G -f https://arm.sero.gic.ericsson.se/artifactory/proj-ldc-repo-rpm-local/common_base_os/sles/3.60.0-32 MMON_BASE_OS_SLES_REPO && \
    zypper refresh && \
    zypper install -l -y jq zip curl unzip python39 python39-pip && \
    zypper clean && \
    pip3.9 install --no-cache-dir pandas pyaml numpy datetime shutils openpyxl xlrd xlsxwriter requests python-dotenv && \
    mkdir /cve-jira-task-generator && \
    chmod ugo+rw /cve-jira-task-generator

COPY ./python_script /cve-jira-task-generator/python_script
COPY ./utility/checkPRMdata.py /cve-jira-task-generator/utility/checkPRMdata.py
COPY ./utility/get_prm_data.py /cve-jira-task-generator/utility/get_prm_data.py
COPY ./log /cve-jira-task-generator/log
COPY ./db_input_tables /cve-jira-task-generator/db_input_tables
COPY ./path_2_rpm_associations.yml /cve-jira-task-generator/path_2_rpm_associations.yml
COPY ./logging.yaml /cve-jira-task-generator/logging.yaml

WORKDIR /cve-jira-task-generator

CMD ["/bin/sh"]
